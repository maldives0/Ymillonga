{"ast":null,"code":"// import { useRouter } from 'next/router';\n// import { backUrl } from '../../config/config';\n// const router = useRouter();\n// router.push(`${backUrl}/user/google`);\nconst passport = require('passport');\n\nexport default function handler(req, res) {\n  passport.authenticate('google', (err, user, info) => {\n    if (err) {\n      console.error(err);\n      return next(err);\n    }\n\n    if (info) {\n      return res.status(401).send(info.reason);\n    }\n\n    return req.login(user, async loginErr => {\n      if (loginErr) {\n        console.error(loginErr);\n        return next(loginErr);\n      }\n\n      res.status(200).json(user);\n    });\n  });\n}","map":{"version":3,"sources":["c:/Users/HOME/Documents/ymillonga/front/pages/api/google.js"],"names":["passport","require","handler","req","res","authenticate","err","user","info","console","error","next","status","send","reason","login","loginErr","json"],"mappings":"AAAA;AACA;AACA;AAEA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,eAAe,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AACtCJ,EAAAA,QAAQ,CAACK,YAAT,CAAsB,QAAtB,EAAgC,CAACC,GAAD,EAAMC,IAAN,EAAYC,IAAZ,KAAqB;AACjD,QAAIF,GAAJ,EAAS;AACLG,MAAAA,OAAO,CAACC,KAAR,CAAcJ,GAAd;AACA,aAAOK,IAAI,CAACL,GAAD,CAAX;AACH;;AACD,QAAIE,IAAJ,EAAU;AACN,aAAOJ,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBL,IAAI,CAACM,MAA1B,CAAP;AACH;;AACD,WAAOX,GAAG,CAACY,KAAJ,CAAUR,IAAV,EAAgB,MAAOS,QAAP,IAAoB;AACvC,UAAIA,QAAJ,EAAc;AACVP,QAAAA,OAAO,CAACC,KAAR,CAAcM,QAAd;AACA,eAAOL,IAAI,CAACK,QAAD,CAAX;AACH;;AACDZ,MAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBK,IAAhB,CAAqBV,IAArB;AACH,KANM,CAAP;AAOH,GAfD;AAiBH","sourcesContent":["// import { useRouter } from 'next/router';\r\n// import { backUrl } from '../../config/config';\r\n// const router = useRouter();\r\n\r\n// router.push(`${backUrl}/user/google`);\r\nconst passport = require('passport');\r\nexport default function handler(req, res) {\r\n    passport.authenticate('google', (err, user, info) => {\r\n        if (err) {\r\n            console.error(err);\r\n            return next(err);\r\n        }\r\n        if (info) {\r\n            return res.status(401).send(info.reason);\r\n        }\r\n        return req.login(user, async (loginErr) => {\r\n            if (loginErr) {\r\n                console.error(loginErr);\r\n                return next(loginErr);\r\n            }\r\n            res.status(200).json(user);\r\n        })\r\n    })\r\n\r\n}"]},"metadata":{},"sourceType":"module"}