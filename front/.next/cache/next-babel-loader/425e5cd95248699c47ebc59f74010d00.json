{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { Form, Input, Button, Row, Divider } from 'antd';\nimport Link from 'next/link';\nimport useInput from '../hooks/useInput';\nimport { default as UserOutlined } from '@ant-design/icons/UserOutlined';\nimport { default as LockOutlined } from '@ant-design/icons/LockOutlined';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { LOG_IN_REQUEST } from '../reducers/user';\nimport FacebookLoginBtn from './FacebookLoginBtn';\nimport GoogleLoginBtn from './GoogleLoginBtn';\nimport { useRouter } from 'next/router';\nimport { jsx as ___EmotionJSX } from \"@emotion/react\";\nvar layout = {\n  wrapperCol: {\n    xs: {\n      span: 21,\n      offset: 1\n    },\n    sm: {\n      span: 18,\n      offset: 3\n    },\n    md: {\n      span: 9,\n      offset: 4\n    },\n    lg: {\n      span: 9,\n      offset: 6\n    }\n  }\n};\nvar tailLayout = {\n  wrapperCol: {\n    offset: 6,\n    span: 18\n  }\n};\nvar btnLayout = {\n  wrapperCol: {\n    xs: {\n      span: 21,\n      offset: 1\n    },\n    sm: {\n      span: 21,\n      offset: 2\n    },\n    md: {\n      span: 18,\n      offset: 4\n    },\n    lg: {\n      span: 18,\n      offset: 4\n    }\n  }\n};\n\nvar LoginForm = function LoginForm() {\n  var Router = useRouter();\n  var me = useSelector(function (state) {\n    return state.user.me;\n  });\n  var logInLoading = useSelector(function (state) {\n    return state.user.logInLoading;\n  });\n  var logInError = useSelector(function (state) {\n    return state.user.logInError;\n  });\n  var dispatch = useDispatch();\n\n  var _useInput = useInput(''),\n      _useInput2 = _slicedToArray(_useInput, 2),\n      email = _useInput2[0],\n      onChangeEmail = _useInput2[1];\n\n  var _useInput3 = useInput(''),\n      _useInput4 = _slicedToArray(_useInput3, 2),\n      password = _useInput4[0],\n      onChangePassword = _useInput4[1];\n\n  var _useState = useState(false),\n      basicButtonClicked = _useState[0],\n      setBasicButtonClicked = _useState[1];\n\n  useEffect(function () {\n    if (me && me.id) {\n      alert('로그인 중입니다. 메인페이지로 이동합니다.');\n      Router.replace('/'); //push는 뒤로가기 하면 히스토리가 남아있지만 replace는 지워짐\n    }\n  }, [me && me.id]);\n  useEffect(function () {\n    if (logInError) alert(logInError);\n  }, [logInError]);\n  var onClickBasicButton = useCallback(function () {\n    setBasicButtonClicked(true);\n  }, []);\n  var onSubmitForm = useCallback(function () {\n    if (basicButtonClicked) {\n      dispatch({\n        type: LOG_IN_REQUEST,\n        data: {\n          email: email,\n          password: password\n        }\n      });\n    }\n  }, [email, password, basicButtonClicked]);\n  return ___EmotionJSX(Form, _extends({}, layout, {\n    name: \"basic-form\",\n    initialValues: {\n      remember: true\n    },\n    onFinish: onSubmitForm\n  }), ___EmotionJSX(Form.Item, {\n    name: \"username\",\n    rules: [{\n      required: basicButtonClicked,\n      message: 'Please input your username!'\n    }]\n  }, ___EmotionJSX(Input, {\n    prefix: ___EmotionJSX(UserOutlined, {\n      className: \"site-form-item-icon\"\n    }),\n    placeholder: \"Username\",\n    value: email,\n    onChange: onChangeEmail\n  })), ___EmotionJSX(Form.Item, {\n    name: \"password\",\n    rules: [{\n      required: basicButtonClicked,\n      message: 'Please input your password!'\n    }]\n  }, ___EmotionJSX(Input, {\n    prefix: ___EmotionJSX(LockOutlined, {\n      className: \"site-form-item-icon\"\n    }),\n    type: \"password\",\n    placeholder: \"Password\",\n    value: password,\n    onChange: onChangePassword\n  })), ___EmotionJSX(Form.Item, tailLayout, ___EmotionJSX(Row, null, ___EmotionJSX(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    loading: logInLoading,\n    onClick: onClickBasicButton\n  }, \"\\uB85C\\uADF8\\uC778\"), ___EmotionJSX(Divider, {\n    type: \"vertical\",\n    style: {\n      border: 'none'\n    }\n  }), ___EmotionJSX(Link, {\n    href: \"/signup\"\n  }, ___EmotionJSX(\"a\", null, ___EmotionJSX(Button, null, \"\\uD68C\\uC6D0\\uAC00\\uC785\"))))), ___EmotionJSX(Form.Item, btnLayout, ___EmotionJSX(Row, {\n    justify: \"center\"\n  }, ___EmotionJSX(GoogleLoginBtn, null), ___EmotionJSX(FacebookLoginBtn, null))));\n};\n\nexport default LoginForm;","map":null,"metadata":{},"sourceType":"module"}